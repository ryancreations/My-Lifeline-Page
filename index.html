<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Lifeline • Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#87ceeb">
  <style>
    :root{--primary:#87ceeb;--accent:#00bcd4;--dark:#0a0a0a;--light:#f0fbff}
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:var(--bg,linear-gradient(to bottom,#fff8f0,#e0f7ff));font-family:'Quicksand',sans-serif;color:#333;transition:all .5s}
    nav{position:fixed;top:0;width:100%;background:var(--primary);padding:12px;z-index:1000;text-align:center;box-shadow:0 4px 10px rgba(0,0,0,.1)}
    nav button{background:white;color:var(--accent);border:none;padding:10px 18px;margin:5px;border-radius:25px;cursor:pointer;font-weight:600;transition:.3s}
    nav button:hover{background:var(--accent);color:white}
    main{margin-top:80px;max-width:900px;margin:auto;padding:15px}
    header{background:var(--primary);color:white;padding:35px;text-align:center;border-radius:15px}
    .section{background:var(--light);border:2px solid var(--primary);border-radius:15px;padding:20px;margin:20px 0;box-shadow:0 6px 15px rgba(0,0,0,.08)}
    .section h2{color:var(--accent);text-align:center;margin-bottom:15px}
    #breathingCircle{width:120px;height:120px;background:var(--accent);border-radius:50%;margin:20px auto;animation:breathe 12s infinite}
    @keyframes breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.6)}}
    button{background:var(--accent);color:white;border:none;padding:12px 24px;border-radius:10px;cursor:pointer;margin:8px;font-size:1.1em;transition:.3s}
    button:hover{background:#0097a7}
    textarea{width:100%;padding:15px;border-radius:10px;border:1px solid #ccc;resize:vertical;font-family:inherit}
    #floatAff{position:fixed;bottom:20px;right:20px;background:#222;color:#fff;padding:15px;border-radius:15px;z-index:999;animation:float 20s infinite}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}
    .mood-chart canvas{background:white;border-radius:10px;padding:10px}
    .theme-btn{background:#333;color:white;margin:5px;padding:10px}
    #dailyQuote{font-size:1.4em;font-style:italic;text-align:center;background:#fff;padding:20px;border-radius:15px;margin:20px 0}
    @media(max-width:600px){nav button{display:block;margin:10px auto}}
  </style>
</head>
<body>

<nav>
  <button onclick="location.href='index.html'">Dashboard</button>
  <button onclick="location.href='emergency.html'">Emergency</button>
  <button onclick="location.href='mental.html'">Mental Health</button>
  <button onclick="location.href='videos.html'">Videos</button>
  <button onclick="location.href='music.html'">Music</button>
</nav>

<main>
  <header>
    <h1>My Lifeline Page</h1>
    <p>Your Safe Space • Created with love by Ryan Roland</p>
    <p id="currentDate"></p>
  </header>

  <div id="floatAff">You're still here. That matters.</div>
  <p id="randomHugMessage" style="text-align:center;font-size:1.4em;color:#555;margin:20px"></p>

  <div class="section">
    <button onclick="panicMode()">Panic Button • Breathe With Me</button>
    <button onclick="task()">Give Me Something To Do</button>
  </div>

  <div class="section">
    <h2>Breathe With Me</h2>
    <div id="breathingCircle"></div>
    <p style="text-align:center;font-size:1.3em">Inhale... Hold... Exhale...</p>
  </div>

  <div class="section">
    <h2>Daily Affirmation</h2>
    <div id="dailyQuote">Loading your hug...</div>
  </div>

  <div class="section mood-chart">
    <h2>How Are You Feeling?</h2>
    <button onclick="saveMood('Happy')">Happy</button>
    <button onclick="saveMood('Sad')">Sad</button>
    <button onclick="saveMood('Anxious')">Anxious</button>
    <button onclick="saveMood('Calm')">Calm</button>
    <button onclick="saveMood('Tired')">Tired</button>
    <canvas id="moodChart" height="200"></canvas>
  </div>

  <div class="section">
    <h2>Write & Release</h2>
    <textarea id="journal" rows="6" placeholder="Let it out... this is just for you."></textarea><br><br>
    <button onclick="saveJournal()">Save Entry</button>
    <button onclick="clearJournal()">Poof! Erase</button>
    <button onclick="downloadJournal()">Download Journal</button>
  </div>

  <div class="section">
    <h2>People Who Care</h2>
    <button onclick="location.href='tel:9032494334'">Call Bryce ❤️</button>
    <button onclick="alert('Text Mom: I need a check-in')">'Mom'</button>
  </div>

  <div class="section">
    <h2>Milestone Countdown</h2>
    <div id="countdown" style="font-size:1.6em;text-align:center"></div>
  </div>

  <div class="section">
    <h2>Change Theme</h2>
    <button class="theme-btn" onclick="setTheme('light')">Light</button>
    <button class="theme-btn" onclick="setTheme('dark')">Dark Mode</button>
    <button class="theme-btn" onclick="setTheme('ocean')">Ocean</button>
    <button class="theme-btn" onclick="setTheme('forest')">Forest</button>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Date
  document.getElementById("currentDate").textContent = new Date().toLocaleDateString('en-US', {weekday:'long', year:'numeric', month:'long', day:'numeric'});

  // Floating affirmation
  setInterval(() => document.getElementById("floatAff").style.transform = `translate(${Math.random()*40-20}px, ${Math.random()*40-20}px)`, 4000);

  // Daily quote API
  fetch('https://zenquotes.io/api/random').then(r=>r.json()).then(d=> {
    document.getElementById("dailyQuote").innerHTML = `"${d[0].q}"<br><i>— ${d[0].a}</i>`;
  });

  // Mood tracking + Chart.js
  const moods = JSON.parse(localStorage.getItem('moods')||'[]');
  function saveMood(mood) {
    const today = new Date().toLocaleDateString();
    moods.push({date: today, mood});
    localStorage.setItem('moods', JSON.stringify(moods.slice(-30)));
    updateChart();
  }
  const ctx = document.getElementById('moodChart').getContext('2d');
  const chart = new Chart(ctx, {type:'line', data:{labels:[], datasets:[{label:'Mood Trend', data:[], borderColor:'#00bcd4', tension:0.4}]}, options:{scales:{y:{min:0,max:5}}}});
  function updateChart() {
    const last7 = moods.slice(-7);
    chart.data.labels = last7.map(m=>m.date.slice(5));
    chart.data.datasets[0].data = last7.map(m=>['Sad','Anxious','Tired','Calm','Happy'].indexOf(m.mood)+1);
    chart.update();
  }
  updateChart();

  // Journal
  document.getElementById('journal').value = localStorage.getItem('journal')||'';
  function saveJournal(){localStorage.setItem('journal', document.getElementById('journal').value); alert('Saved');}
  function clearJournal(){if(confirm('Erase everything?')){document.getElementById('journal').value='';localStorage.removeItem('journal');}}
  function downloadJournal(){
    const text = document.getElementById('journal').value || "Your thoughts matter.";
    const blob = new Blob([text], {type:'text/plain'});
    const a = document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='my-lifeline-journal.txt'; a.click();
  }

  // Countdown (customize date!)
  const target = new Date("2026-06-24T00:00:00");
  function updateCountdown(){
    const diff = target - new Date();
    const el = document.getElementById("countdown");
    if(diff<=0) el.innerHTML = "You made it! Today is your day!";
    else{
      const d=Math.floor(diff/(1000*60*60*24));
      const h=Math.floor((diff/(1000*60*60))%24);
      el.innerHTML = `${d} days ${h} hours until your milestone`;
    }
  }
  setInterval(updateCountdown,1000); updateCountdown();

  // Themes
  function setTheme(theme){
    if(theme==='dark'){document.body.style.background='#0a0a0a';document.body.style.color='white';}
    else if(theme==='ocean') document.body.style.background='linear-gradient(to bottom,#001f3f,#87ceeb)';
    else if(theme==='forest') document.body.style.background='linear-gradient(to bottom,#1b4d3e,#a8e6cf)';
    else document.body.style.background='linear-gradient(to bottom,#fff8f0,#e0f7ff)';
    localStorage.setItem('theme',theme);
  }
  if(localStorage.getItem('theme')) setTheme(localStorage.getItem('theme'));

  // Tasks & Panic
  const tasks = ["Drink water","Take 3 deep breaths","Stretch","Go outside for 1 minute","Listen to your favorite song"];
  function task(){alert(tasks[Math.floor(Math.random()*tasks.length)]);}
  function panicMode(){
    document.body.style.background='#000';document.body.style.color='#fff';
    alert("You're safe. You're here. Just breathe with me.");
  }

  // Random hug
  const hugs = ["You're doing better than you think","One breath at a time","You are so loved","It’s okay to rest","You don’t have to be strong today"];
  document.getElementById("randomHugMessage").textContent = hugs[Math.floor(Math.random()*hugs.length)];
</script>
</body>
</html>
