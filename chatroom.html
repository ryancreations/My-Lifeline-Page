<!DOCTYPE html>
<html lang="en"><head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ryan ♡ Bryce</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#000;color:#0f0;font-family:'Courier New',monospace;height:100vh;display:flex;flex-direction:column;overflow:hidden}
header{background:#111;padding:15px;text-align:center;font-size:1.5em}
#log{flex:1;padding:20px;overflow-y:auto;font-size:1.2em;line-height:1.6}
.line{margin:5px 0}
.ryan{color:#0f0}
.bryce{color:#0ff}
#input{background:#111;padding:15px;display:flex}
#msg{flex:1;background:transparent;border:none;color:#0f0;font-size:1.2em;outline:none}
#msg::placeholder{color:#060}
</style>
</head><body>

<header>Ryan ♡ Bryce</header>

<div id="log">
  <div class="line">Chat loading...</div>
</div>

<div id="input">
  <input id="msg" placeholder="type here...">
</div>

<script>
// CHANGE THIS TO YOUR RAW messages.txt URL
const MESSAGES_URL = "https://raw.githubusercontent.com/ryancreations/My-Lifeline-Page/refs/heads/main/messages.txt"; // e.g. https://raw.githubusercontent.com/ryancreations/My-Lifeline-Page/main/messages.txt

let name = localStorage.getItem('chatName') || prompt("Ryan or Bryce?", "Ryan");
localStorage.setItem('chatName', name);

function send(){
  const text = document.getElementById('msg').value.trim();
  if(!text) return;
  
  const line = `${new Date().toLocaleTimeString([],{hour:'numeric',minute:'2-digit'})} ${name}: ${text}`;
  addLine(line, name);
  
  // Append to local "cache"
  let chat = localStorage.getItem('localChat') || '';
  chat += line + '\n';
  localStorage.setItem('localChat', chat);
  
  document.getElementById('msg').value = '';
}

function addLine(text, sender){
  const div = document.createElement('div');
  div.className = `line ${sender.toLowerCase()}`;
  div.textContent = text;
  document.getElementById('log').appendChild(div);
  document.getElementById('log').scrollTop = document.getElementById('log').scrollHeight;
}

// Load from shared file every 5 seconds
setInterval(async () => {
  try {
    const res = await fetch(MESSAGES_URL + '?t=' + Date.now()); // cache bust
    const text = await res.text();
    document.getElementById('log').innerHTML = '<div class="line">Chat synced</div>';
    text.split('\n').filter(l=>l.trim()).forEach(line => {
      const parts = line.split(': ');
      const sender = parts.shift().includes('Ryan') ? 'Ryan' : 'Bryce';
      addLine(line, sender);
    });
  } catch(e) {
    document.getElementById('log').innerHTML += '<div class="line">Sync failed — using local</div>';
  }
}, 5000);

// Initial load
document.getElementById('msg').focus();
document.getElementById('msg').addEventListener('keypress', e => {
  if(e.key==='Enter') send();
});
</script>
</body></html>