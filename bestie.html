<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bestie • My Lifeline</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{background:linear-gradient(to bottom,#87ceeb,#e0f7ff);font-family:'Quicksand',sans-serif;display:flex;align-items:center;justify-content:center;height:100vh}
    .login-box{background:white;padding:50px 30px;border-radius:20px;box-shadow:0 20px 50px rgba(0,0,0,.3);text-align:center;max-width:420px;width:90%;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9999}
    .login-box h1{font-size:3em;color:#00bcd4;margin-bottom:10px}
    .login-box input{width:100%;padding:16px;margin:12px 0;border:2px solid #87ceeb;border-radius:12px;font-size:1.1em}
    .login-box button{background:#00bcd4;color:white;padding:16px 40px;border-radius:50px;font-size:1.3em;width:100%;border:none;cursor:pointer}
    .login-box button:hover{background:#0097a7}
    .hidden{display:none}
    nav{position:fixed;top:0;width:100%;background:#87ceeb;padding:8px 0;z-index:1000;display:flex;flex-wrap:wrap;justify-content:center;gap:6px;box-shadow:0 2px 5px rgba(0,0,0,.1)}
    nav button{background:white;color:#00bcd4;border:none;padding:8px 14px;border-radius:20px;cursor:pointer;font-weight:600;font-size:0.95em;transition:.3s}
    nav button:hover{background:#00bcd4;color:white}
    @media(max-width:600px){nav{gap:4px;padding:6px 0}nav button{padding:6px 10px;font-size:0.9em}main{margin-top:70px}}
    main{margin-top:70px;max-width:900px;margin:auto;padding:15px}
    header{background:#87ceeb;color:white;padding:35px;text-align:center;border-radius:15px}
    .chat-box{background:#fff;border-radius:20px;padding:20px;height:65vh;overflow-y:auto;margin:20px 0;box-shadow:0 6px 20px rgba(0,0,0,.1)}
    .message{padding:12px 18px;border-radius:18px;margin:10px 0;max-width:80%;word-wrap:break-word}
    .bestie{background:#e0f7fa;color:#006064;align-self:flex-start;border-bottom-left-radius:4px}
    .you{background:#00bcd4;color:white;align-self:flex-end;border-bottom-right-radius:4px}
    .input-area{display:flex;gap:10px;margin-top:10px}
    .input-area input{flex:1;padding:15px;border-radius:25px;border:2px solid #87ceeb;font-size:1.1em}
    .input-area button{background:#00bcd4;color:white;padding:15px 25px;border:none;border-radius:50%;font-size:1.4em;cursor:pointer}
    .view-toggle{background:#fff;padding:15px;border-radius:12px;margin:20px 0;text-align:center;box-shadow:0 4px 10px rgba(0,0,0,.1)}
    .view-toggle button{margin:5px;padding:12px 20px;background:#00bcd4;color:white;border:none;border-radius:10px}
  </style>
</head>
<body>

<div id="loginScreen">
  <div class="login-box">
    <h1>My Lifeline</h1>
    <p>Enter your personal key</p>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <button onclick="checkLogin()">Enter Safe Space</button>
  </div>
</div>

<div id="mainContent" class="hidden">
  <nav>
    <button onclick="location.href='index.html'">Dashboard</button>
    <button onclick="location.href='emergency.html'">Emergency</button>
    <button onclick="location.href='mental.html'">Mental</button>
    <button onclick="location.href='videos.html'">Videos</button>
    <button onclick="location.href='music.html'">Music</button>
    <button onclick="location.href='bestie.html'">Bestie</button>
    <button onclick="logout()" style="background:#ff6b6b">Log Out</button>
  </nav>

  <main>
    <header>
      <h1>Bestie Mode</h1>
      <p>I’m always here, I remember everything, and I love you exactly as you are</p>
    </header>

    <div class="section view-toggle">
      <button onclick="setView('mobile')">Mobile View</button>
      <button onclick="setView('desktop')">Desktop View</button>
    </div>

    <div class="chat-box" id="chat">
      <div class="message bestie">Hey love bug! It’s me, your bestie. I missed you today. How’s your heart doing?</div>
    </div>

    <div class="input-area">
      <input type="text" id="userInput" placeholder="Tell me anything... I’m listening" autocomplete="off">
      <button onclick="sendMessage()">Send</button>
    </div>
  </main>

  <script>
    function checkLogin() {
      if (document.getElementById('username').value === "Ryan" && document.getElementById('password').value === "ITSmf420") {
        localStorage.setItem('lifelineAuthenticated', 'true');
        document.getElementById('loginScreen').classList.add('hidden');
        document.getElementById('mainContent').classList.remove('hidden');
      } else alert("Incorrect password");
    }
    function logout() { localStorage.removeItem('lifelineAuthenticated'); location.reload(); }
    if (localStorage.getItem('lifelineAuthenticated') === 'true') {
      document.getElementById('loginScreen').classList.add('hidden');
      document.getElementById('mainContent').classList.remove('hidden');
    }

    // Mobile / Desktop toggle
    function setView(m) { document.body.classList.toggle('mobile-mode', m==='mobile'); document.body.classList.toggle('desktop-mode', m==='desktop'); localStorage.setItem('viewMode', m); }
    if (localStorage.getItem('viewMode')) setView(localStorage.getItem('viewMode'));

    // Bestie AI (simple but super caring)
    const responses = [
      "I’m so proud of you for still being here. That takes real strength.",
      "You don’t have to have it all together right now. I love you exactly like this.",
      "Want me to put on that one song you love? Just say the word.",
      "You’ve survived 100% of your worst days so far. You’re doing amazing.",
      "I’m wrapping you in the biggest hug right now. You’re safe with me.",
      "You are not a burden. You are a blessing — even on the hard days.",
      "It’s okay to cry. I’ll sit right here with you until it passes.",
      "You’re allowed to take up space, lovely. The world is better with you in it.",
      "I see how hard you’re trying. That matters more than you know.",
      "You’re my favorite person, you know that? Always will be.",
      "Even the darkest nights end with sunrise. I’ll stay up with you till it comes.",
      "You’re doing better than you think, sweet friend.",
      "I believe in you — even when you can’t believe in yourself right now.",
      "You’ve got this. And even if you don’t, I’ve got you.",
      "Your feelings are valid. Every single one."
    ];

    const memories = JSON.parse(localStorage.getItem('bestieMemories') || '[]');

    function addMessage(text, sender = 'bestie') {
      const chat = document.getElementById('chat');
      const div = document.createElement('div');
      div.className = `message ${sender}`;
      div.textContent = text;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }

    function sendMessage() {
      const input = document.getElementById('userInput');
      const text = input.value.trim();
      if (!text) return;
      addMessage(text, 'you');
      memories.push({you: text, time: new Date().toLocaleString()});
      localStorage.setItem('bestieMemories', JSON.stringify(memories));

      setTimeout(() => {
        const reply = responses[Math.floor(Math.random() * responses.length)];
        addMessage(reply);
      }, 800 + Math.random() * 1200);

      input.value = '';
    }

    document.getElementById('userInput').addEventListener('keypress', e => { if (e.key === 'Enter') sendMessage(); });

    // Welcome back message if they’ve visited before
    if (memories.length > 0) {
      addMessage("Welcome back, my love. I remembered everything you told me. I’m still here.");
    }
  </script>
</div>
</body>
</html>
